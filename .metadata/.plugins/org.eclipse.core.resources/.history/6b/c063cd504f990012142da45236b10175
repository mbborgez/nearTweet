package pt.utl.ist.cm.neartweetclient.connectionTasks;

import pt.utl.ist.cm.neartweetEntities.PDU.PDU;
import android.R.bool;
import android.util.Log;

public class AsyncReceiveThread implements Runnable {
	private synchronized bool isConnected;
	public void run() {
		
    	while (ConnectionStatus.getInstance().getInputStream() == null){
    		//DO NOTHING in a bruteforce way
    	}
    	
		Object receivedObj;
		try {
			Log.i(this.getClass().toString(), "Waiting to receive object");
			receivedObj = ConnectionStatus.getInstance().getInputStream().readObject();
			Log.i(this.getClass().toString(), "Object received -  " + receivedObj);
		} catch (Exception e) {
			receivedObj = null;
		}	
		
		if(receivedObj!=null && receivedObj instanceof PDU){
			throw new RuntimeException("RECEIVED A NEW PDU " + receivedObj);
			//update things on the activity
		}
    }
    
}